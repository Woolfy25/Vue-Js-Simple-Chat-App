import{_ as g}from"./CLm0Itc4.js";import{r as m,g as h,k as x,c as l,o as a,a as e,t as i,z as y,q as b,v as w,F as k,p as C,n as d,P as c,b as S,w as $,A as L}from"./DeMtFh4g.js";import{u as j}from"./DrY93wuS.js";const B={class:"grid grid-cols-4 h-screen"},M={class:"col-span-1 border-r-2 border-gray-300 flex flex-col"},N={class:"p-6 border-b-2 border-gray-300"},z={class:"flex justify-between items-center"},A={class:"text-sm font-bold p-1 rounded-xs bg-gray-200 w-[28px] h-[28px] text-center"},P={class:"p-4"},V={class:"relative"},D={class:"flex-1 overflow-y-auto p-4 pt-0"},F={class:"space-y-2 mt-4"},O={class:"relative"},q=["src","alt"],E={class:"flex flex-col justify-center gap-1 flex-1 min-w-0"},Q={class:"text-sm truncate"},R={class:"text-xs text-gray-500 truncate"},T={class:"col-span-3 overflow-y-auto"},J={__name:"default",async setup(U){let u,p;const r=m(""),n=j();[u,p]=h(()=>n.fetchChats()),await u,p();const _=x(()=>r.value?n.chats.filter(t=>t.user.name.toLowerCase().includes(r.value.toLowerCase())):n.chats),f=t=>{if(!(t!=null&&t.length))return"No messages yet";const o=t[t.length-1];return o.content.length>25?`${o.content.substring(0,25)}...`:o.content};return(t,o)=>{const v=g;return a(),l("div",B,[e("div",M,[e("div",N,[e("div",z,[o[1]||(o[1]=e("h2",{class:"text-lg font-semibold"},"Active Conversations",-1)),e("p",A,i(y(n).chats.length),1)])]),e("div",P,[e("div",V,[o[2]||(o[2]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),b(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),type:"text",placeholder:"Search...",class:"w-full p-2 border border-gray-200 bg-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-400 placeholder:text-sm"},null,512),[[w,r.value]])])]),e("div",D,[e("ul",F,[(a(!0),l(k,null,C(_.value,s=>(a(),l("li",{class:d(["mb-4 rounded-md py-1 px-2",{"bg-gray-100":(t._.provides[c]||t.$route).params.id===s.id}]),key:s.id},[S(v,{to:`/${s.id}`,class:d([{"text-sky-400":(t._.provides[c]||t.$route).params.id===s.id,"hover:text-sky-400":(t._.provides[c]||t.$route).params.id!==s.id},"flex flex-row gap-3 py-1 transition-colors items-center relative"])},{default:$(()=>[e("div",O,[e("img",{src:s.user.avatar,alt:s.user.name,class:"w-10 h-10 rounded-full object-cover"},null,8,q),e("span",{class:d([{"bg-green-500":s.user.isOnline,"bg-red-500":!s.user.isOnline},"absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white"])},null,2)]),e("div",E,[e("p",Q,i(s.user.name),1),e("p",R,i(f(s.messages)),1)])]),_:2},1032,["to","class"])],2))),128))])])]),e("div",T,[L(t.$slots,"default")])])}}};export{J as default};
